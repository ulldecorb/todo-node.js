<%- include("./partials/header") %>

<h1 class="text-center my-5"><%= title %></h1>

<div class="container mt-5">
    <form action="/add/todo" class="d-flex my-5" method="POST">
        <input type="text" name="todo" class="form-control" placeholder="Enter task">
        <input type="submit" value="Add" class="btn btn-md btn-primary mx-2">
    </form>
    <!-- <ul class="list-group my-5">
        <% todos.forEach((todo) => { %>
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <input class="form-check-input" type="checkbox" 
                <% if (todo.completed) { %>
                    checked
                <% } %>                
                value="" id="flexCheckDefault">
                <% if (todo.completed) { %>
                    <del>
                <% } %>
                        <strong class="text-capitalize"><%= todo.todo %></strong>
                <% if (todo.completed) { %>
                </del>
                <% } %>
                <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
                    <form action="/update/<%= todo._id %>" class="d-flex" method="GET">
                        <input type="text" name="todo" class="form-control" value="<%= todo.todo %>">
                        <input type="submit" value="Update" class="btn btn-md btn-primary mx-2">
                    </form>
                    <a href="/delete/<%= todo._id %>" class="btn btn-danger btn-md btn-primary mx-2">Delete</a>
                </div>
            </li>
       <% }); %>
    </ul> -->
    <ul  id="accordion">
        <% todos.forEach((todo) => { %>
            <!-- <li class="list-group-item d-flex justify-content-between align-items-center">
                <input class="form-check-input" type="checkbox" 
                <% if (todo.completed) { %>
                    checked
                <% } %>                
                value="" id="flexCheckDefault">
                <% if (todo.completed) { %>
                    <del>
                <% } %>
                        <strong class="text-capitalize"><%= todo.todo %></strong>
                <% if (todo.completed) { %>
                </del>
                <% } %>
                <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
                    <form action="/update/<%= todo._id %>" class="d-flex" method="GET">
                        <input type="text" name="todo" class="form-control" value="<%= todo.todo %>">
                        <input type="submit" value="Update" class="btn btn-md btn-primary mx-2">
                    </form>
                    <a href="/delete/<%= todo._id %>" class="btn btn-danger btn-md btn-primary mx-2">Delete</a>
                </div> -->


            <li class="card">
                <div class="card-header" id="headingOne">
                  <h5 class="mb-0">
                    <button class="btn btn-primary" type="button" data-bs-toggle="collapse" 
                    data-bs-target="#<%= todo.todo.split('').map((x) => x.match(/[a-z]/i)  ? x : '').join('') %>" 
                    aria-expanded="false" 
                    aria-controls="<%= todo.todo.split('').map((x) => x.match(/[a-z]/i)  ? x : '').join('') %>">
                        <%= todo.todo %>
                    </button>
                  </h5>
                </div>
                <div class="collapse" id="<%= todo.todo.split('').map((x) => x.match(/[a-z]/i)  ? x : '').join('') %>">
                  <div class="card-body">
                    <form action="/update/<%= todo._id %>" class="d-flex" method="GET">
                        <input type="text" name="todo" class="form-control" value="<%= todo.todo %>">
                        <input type="submit" value="Update" class="btn btn-md btn-primary mx-2">
                    </form>
                    <a href="/delete/<%= todo._id %>" class="btn btn-danger btn-md btn-primary mx-2">Delete</a>
                  </div>
                </div>
            </li>
       <% }); %>
    </ul>
</div>

<%- include('./partials/footer') %> 